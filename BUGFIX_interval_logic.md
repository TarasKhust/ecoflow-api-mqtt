# üêõ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è: –õ–æ–≥—ñ–∫–∞ —ñ–Ω—Ç–µ—Ä–≤–∞–ª—É –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

## –ü—Ä–æ–±–ª–µ–º–∞

–†–∞–Ω—ñ—à–µ –ø—Ä–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—ñ MQTT —ñ–Ω—Ç–µ—Ä–≤–∞–ª REST –∑–∞–ø–∏—Ç—ñ–≤ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±—ñ–ª—å—à—É–≤–∞–≤—Å—è √ó 2**:
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞–≤: **15 —Å–µ–∫—É–Ω–¥**
- –ü—ñ—Å–ª—è MQTT: –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–∞–≤–∞–ª–æ **30 —Å–µ–∫—É–Ω–¥**
- –õ–æ–≥ –ø–æ–∫–∞–∑—É–≤–∞–≤: `‚ö†Ô∏è REST polling interval changed: 15 ‚Üí 30 seconds`

**–ü—Ä–æ–±–ª–µ–º–∏ —Ü—å–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É:**
1. ‚ùå –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª—é—î —Ñ–∞–∫—Ç–∏—á–Ω–∏–π —ñ–Ω—Ç–µ—Ä–≤–∞–ª
2. ‚ùå UI –ø–æ–∫–∞–∑—É–≤–∞–≤ 15 —Å–µ–∫—É–Ω–¥, –∞–ª–µ —Ä–µ–∞–ª—å–Ω–æ –±—É–ª–æ 30
3. ‚ùå –ù–µ–∑—Ä–æ–∑—É–º—ñ–ª–æ —á–æ–º—É —ñ–Ω—Ç–µ—Ä–≤–∞–ª –∑–º—ñ–Ω—é—î—Ç—å—Å—è
4. ‚ùå –ü—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –º–æ–≥–ª–æ –ø–æ–¥–≤–æ—é–≤–∞—Ç–∏—Å—è –∑–Ω–æ–≤—É

## –†—ñ—à–µ–Ω–Ω—è

**–í–∏–¥–∞–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è —ñ–Ω—Ç–µ—Ä–≤–∞–ª—É –ø—Ä–∏ MQTT.**

–¢–µ–ø–µ—Ä:
- ‚úÖ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á **–ø–æ–≤–Ω—ñ—Å—Ç—é –∫–æ–Ω—Ç—Ä–æ–ª—é—î** —ñ–Ω—Ç–µ—Ä–≤–∞–ª —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ—ñ–≥
- ‚úÖ –í—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ 15 —Å–µ–∫—É–Ω–¥ = –±—É–¥–µ **—Ä—ñ–≤–Ω–æ 15 —Å–µ–∫—É–Ω–¥**
- ‚úÖ MQTT –ø—Ä–∞—Ü—é—î –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –¥–ª—è —Ä–µ–∞–ª-—Ç–∞–π–º –¥–∞–Ω–∏—Ö
- ‚úÖ –ü—Ä–æ–∑–æ—Ä–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –±–µ–∑ "–º–∞–≥—ñ—ó"

## –ó–º—ñ–Ω–∏ –≤ –∫–æ–¥—ñ

### –î–æ:
```python
if connected:
    self._mqtt_connected = True
    self._use_mqtt = True
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–¥–≤–æ—é–≤–∞–ª–∏ —ñ–Ω—Ç–µ—Ä–≤–∞–ª
    original_interval = self.update_interval_seconds
    new_interval = original_interval * 2
    self.update_interval = timedelta(seconds=new_interval)
    _LOGGER.info("REST polling interval changed: %d ‚Üí %d seconds", ...)
```

### –ü—ñ—Å–ª—è:
```python
if connected:
    self._mqtt_connected = True
    self._use_mqtt = True
    _LOGGER.info("MQTT connected successfully for device %s", self.device_sn)
    _LOGGER.info(
        "‚ö†Ô∏è Hybrid mode active: MQTT for real-time updates + REST every %d seconds",
        self.update_interval_seconds
    )
```

## –Ø–∫ –ø—Ä–∞—Ü—é—î –≥—ñ–±—Ä–∏–¥–Ω–∏–π —Ä–µ–∂–∏–º —Ç–µ–ø–µ—Ä

1. **REST API** (–∫–æ–∂–Ω—ñ N —Å–µ–∫—É–Ω–¥ –∑ –∫–æ–Ω—Ñ—ñ–≥—É):
   - –û—Ç—Ä–∏–º—É—î –≤—Å—ñ 160 –ø–æ–ª—ñ–≤
   - –ó–∞–±–µ–∑–ø–µ—á—É—î –ø–æ–≤–Ω–æ—Ç—É –¥–∞–Ω–∏—Ö
   - –ö–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º

2. **MQTT** (—Ä–µ–∞–ª-—Ç–∞–π–º):
   - –ú–∏—Ç—Ç—î–≤—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (–ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å, –∑–∞—Ä—è–¥, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞)
   - –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ–ª—è (250+ –ø–æ–ª—ñ–≤)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

3. **–û–±'—î–¥–Ω–∞–Ω–Ω—è**:
   - MQTT –º–∞—î –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç (—Å–≤—ñ–∂—ñ—à—ñ –¥–∞–Ω—ñ)
   - REST –∑–∞–ø–æ–≤–Ω—é—î –ø—Ä–æ–ø—É—â–µ–Ω—ñ –ø–æ–ª—è
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: 269 —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –ø–æ–ª—ñ–≤

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

- **15 —Å–µ–∫—É–Ω–¥ (Recommended)** - –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è –≥—ñ–±—Ä–∏–¥–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É
- **30 —Å–µ–∫—É–Ω–¥** - —è–∫—â–æ —Ö–æ—á–µ—Ç–µ –∑–Ω–∏–∑–∏—Ç–∏ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- **10 —Å–µ–∫—É–Ω–¥** - –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó —Å–≤—ñ–∂–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö
- **5 —Å–µ–∫—É–Ω–¥** - —Ç—ñ–ª—å–∫–∏ –¥–ª—è –¥–µ–±–∞–≥—É (–≤–∏—Å–æ–∫–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ API)

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏:
# ‚ö†Ô∏è Hybrid mode active: MQTT for real-time updates + REST every 15 seconds
# (–ë–µ–∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è "interval changed")
```

## –§–∞–π–ª–∏ –∑–º—ñ–Ω–µ–Ω—ñ

- `custom_components/ecoflow_api/hybrid_coordinator.py` - –≤–∏–¥–∞–ª–µ–Ω–æ auto-scaling –ª–æ–≥—ñ–∫—É

---

**–ê–≤—Ç–æ—Ä**: AI Assistant  
**–î–∞—Ç–∞**: 2025-12-12  
**–í–µ—Ä—Å—ñ—è**: 1.4.0-beta4+

